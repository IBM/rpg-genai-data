# metadata.txt

The `metadata.txt` file describes important attributes of the training data in a yaml file

## Structure

Different sets of attributes will be used depending on the task and whether a complete source file is involved or a subset of another source is being referenced.

1. Complete compilable ILE RPG source file for programs or modules or copybooks

```yaml
difficulty: <rating>
language: <language>
scope: <scope>
use: <usage>
```

2. Structure for Procedure or Subroutine or Selected Lines from another source file

```yaml
source: <directory_of_compilable_source_file>
start: <start_line_number>
end: <end_line_number>
difficulty: <rating>
language: <language>
scope: <scope>
use: <usage>
```

## Attributes

### source

This specifies the name of the main program where the procedure or subroutine is located.  It is described as a relative path from the parent of the current task this `metadata.txt` is describing.

In the following example `programA_proc1` is referencing code on lines 10 to 15 of `programA.rpgle`
```
data/
  explain/
    IBM/
      programA/
        input/
          programA.rpgle
        metadata.txt
      programA_proc1/
        metadata.txt
          source: programA
          start: 10
          end: 15
```

### start

This indicates the line number where the referenced code begins.

### end

This indicates the line number where the referenced code ends.

### difficulty

The difficulty of the explanation as rated from 1 to 5

### language

The language of the input data to the LLM

  - `rpg4ff`      - RPG IV fully free
  - `rpg4ff-sql`  - RPG IV fully free with embedded SQL
  - `rpg4lf`      - RPG IV column-limited free
  - `rpg4lf-sql`  - RPG IV column-limited free with embedded SQL
  - `rpg4fc`      - RPG IV contains both fixed format and free format
  - `rpg4fc-sql`  - RPG IV free form calcs with embedded SQL
  - `rpg4fx`      - RPG IV fixed form
  - `rpg4fx-sql`  - RPG IV fixed form with embedded SQL
  - `rpg3`        - RPG III OPM
  - `rpg2`        - RPG II S/36
  - `dspf`        - DSPF DDS
  - `prtf`        - PRTF DDS
  - `pf`          - PF DDS
  - `lf`          - LF DDS
  - `dspf38`      - System 38 DSPF DDS
  - `prtf38`      - System 38 PRTF DDS
  - `pf38`        - System 38 PF DDS
  - `lf38`        - System 38 LF DDS
  - `cl`          - CL or Command Language (includes CLP and CLLE)
  - `pnlgrp`      - UIM Panel Group
  - `cmd`         - IBM i command source
  - `menu`         - IBM i menu UIM source
  - `mnucmd`      - IBM i menu msgf source, also generated by `STRSDA option(2)`
  - `bnd`         - binder source
  - `c`           - C or C++
  - `cobol`       - COBOL
  - `wscst`       - Workstation Customizing Object - printer transform
  - `sqlTable`    - SQL DDL for a TABLE
  - `sqlView`     - SQL DDL for a VIEW
  - `sqlProcedure`- SQL DDL for a PROCEDURE
  - `sqlTrigger`  - SQL DDL for a TRIGGER

### scope

The scope of the language of the input data to the LLM
  - `line` - selected lines, this is a selection of lines that does comprise one of the following
  - `subr` - subroutine, no other language elements besides `**free` and comments are present
  - `proc` - sub-procedure, no other language elements besides `**free` and comments are present
  - `file` - source file that can be compiles cleanly into an object
  - `record` - DDS record format, an entire DDS record
  - `module`: A source file with the NOMAIN keyword is a module and should only talk about the exported procedures. The top-level summary should just summarize what the procedures do in general (unless there's only one).
  - `program-linear`: A source file with the MAIN keyword should only talk about the main procedure. For the "usage", it could talk about how to call it within RPG code (using the prototype) and also about how to call it from a CL program or from the command line if it's simple enough.
  - `program-cycle`: A source file with only a cycle-main procedure (no MAIN or NOMAIN keyword) should assume it will be a program-entry-procedure and talk about it as though it is creating a program. For the usage, show how to call it from other RPG modules using a prototyped call and also how to call it from the command line. If there are other exported procedures, describe them as well in the api.
  - `copybook`: Some files are only intended to be used as copy files and would need a completely different style of explanation. The file only contains prototypes and definitions or subroutines. This could be handled similar to a NOMAIN module.

### use
Whether this data is being used for:
  - `train` - training the LLM (which is the default)
  - `eval` - for evaluating the quality of the LLM

Note that for the `line` scope, it is not appropriate to have an API level description as it cannot be called.
